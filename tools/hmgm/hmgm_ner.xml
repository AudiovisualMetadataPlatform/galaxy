<tool id="hmgm_ner" name="HMGM NER Correction" version="1.0.0">
  <description>Manual NER correction by a human</description>
  <command detect_errors="exit_code">
  	$__tool_directory__/../amp_json_schema/ner_to_iiif.py $input_ner $original_iiif '$context_json';
  	$__tool_directory__/hmgm_main.py NER $__root_dir__ $original_iiif $corrected_iiif $task_info '$context_json';
    $__tool_directory__/../amp_json_schema/iiif_to_ner.py $corrected_iiif $input_ner $output_ner
</command>                                    
  <inputs>
    <param name="input_ner" type="data" format="json" label="Input NER JSON" help="Original AMP JSON file for Named Entity Extraction correction"/>
    <param name="context_json" type="text" label="HMGM Task Context" help="JSON string containing context information needed for creating Human MGM task">
    	<sanitizer sanitize="false">
    	</sanitizer>
	</param>
  </inputs>
  <outputs>
    <data name="original_iiif" format="json" label="Original IIIF JSON" help="IIIF file converted from the original AMP named entity JSON file" />
    <data name="corrected_iiif" format="json" label="Corrected IIIF JSON" help="IIIF file with corrected named entities"  />
    <data name="output_ner" format="json" label="Output NER JSON" help="AMP JSON file with corrected named entities converted from the corrected IIIF JSON file" />
    <data name="task_info" format="json" label="HMGM Task INFO" help="Information about the Human MMGM task created for NER Correction" />
  </outputs>
  <tests>
  </tests>
  <help>
.. class:: infomark

This is a human MGM that facilitates manual Named Entity Recognition correction by providing a human with the Timeliner editor. 
Note that, if the tool is run by a job submitted from AMPPD, the context parameter will be automatically generated by AMPPD; any user defined value will be overwritten.

  </help>
</tool>
